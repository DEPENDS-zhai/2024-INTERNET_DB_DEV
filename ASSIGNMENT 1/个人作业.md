
# 个人作业1：Web前端初探

## 一、作业要求：

* 针对任意网页，**调研其不同方式请求**。至少包括get、post请求，写出或截图其请求及相应数据包。

* 针对任意网页，使用**JQuery**，能够触发某一事件。写出至少二条语句，截图响应前后不同的状态。

* 完成一个**浏览器插件**，功能不限，文档中写明功能及代码。

## 二、作业内容

本项目包含三个任务，旨在练习网页请求调试、使用 jQuery 触发事件、以及创建一个 Chrome 浏览器插件。

---

## 任务 1：研究不同方式请求

### 1.要求

对任意网页，研究其不同方式请求，包括 `GET`、`POST` 请求，写出或截图其请求及相应数据包。

### 2.基本步骤

1. 打开开发者工具（按 `F12` 或 `Ctrl+Shift+I`）。
2. 进入 “Network”（网络） 面板。
3. 访问网页并筛选出 `GET` 和 `POST` 请求。
4. 选择任意请求，查看 **Headers** 和 **Payload** 标签，截图或记录请求头、响应头及数据包内容。

### 3.POST请求

我们选择南开大学统一身份认证登录页面 进行调研，因其涉及用户输入用户名、密码等信息并提交登录表单，是一个典型的 POST 请求示例。

 #### **1.1. 打开开发者工具**
通过按 F12 或右键选择 “检查”，进入浏览器开发者工具，在“网络（Network）”标签页观察网络请求行为。

截图如下所示：


#### **1.2. POST 请求分析**
从截图可以看到，登录操作的请求详细信息：

- 请求 URL：`https://auth.nankai.edu.cn/oauth/sso/login`

- 请求方法：`POST`

- 状态码：`200 OK`
  表示服务器成功处理了请求。

#### **1.3 请求头部 (Request Headers)**

请求头部 包含了客户端向服务器发起请求的详细信息，例如数据类型、压缩方式、来源页面等。

| 字段                 | 说明                                                         | 示例值                                      |
|----------------------|--------------------------------------------------------------|---------------------------------------------|
| **Accept**           | 指定客户端可接受的响应类型，`*/*` 表示任意类型。             | `*/*`                                       |
| **Accept-Encoding**  | 客户端支持的内容压缩格式。                                    | `gzip, deflate, br, zstd`                   |
| **Accept-Language**  | 指定语言偏好，用于服务器返回对应语言内容。                   | `zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7`       |
| **Connection**       | 控制连接的管理方式，`keep-alive` 表示保持长连接。             | `keep-alive`                                |
| **Content-Length**   | 请求体的长度（字节数）。                                     | `43`                                        |
| **Content-Type**     | 请求体中提交的数据类型及字符编码格式。                       | `application/x-www-form-urlencoded; charset=UTF-8` |
| **Cookie**           | 用于存储用户会话信息，携带给服务器。                         | `PHPSESSID=qe3u8lfk9f80v6dip9904pr9l7`       |
| **Host**             | 请求的目标服务器主机名和端口号。                             | `auth.nankai.edu.cn`                        |
| **Origin**           | 请求的来源地址，用于跨域请求验证。                           | `https://auth.nankai.edu.cn`                |
| **Referer**          | 发起请求的来源页面 URL，帮助服务器追踪请求来源。             | `https://auth.nankai.edu.cn/auth/sso/`      |
| **Sec-Ch-Ua**        | 提供客户端浏览器和引擎的详细信息。                           | `"Microsoft Edge";v="131", "Chromium";v="131"` |
| **Sec-Ch-Ua-Mobile** | 指示请求是否来自移动设备，`?0` 表示非移动设备。              | `?0`                                        |
| **Sec-Ch-Ua-Platform** | 指定客户端的平台类型，如操作系统。                          | `"Windows"`                                 |
| **Sec-Fetch-Dest**   | 表示请求的目标资源类型，例如 `empty` 表示无具体资源。         | `empty`                                     |
| **Sec-Fetch-Mode**   | 控制请求模式，`cors` 表示跨域资源共享请求。                   | `cors`                                      |
| **Sec-Fetch-Site**   | 表示请求的发起源与目标源的关系，`same-origin` 表示同源请求。  | `same-origin`                               |
| **User-Agent**       | 客户端的详细信息，包括操作系统、浏览器类型等。               | `Mozilla/5.0 (Windows NT 10.0; Win64; x64)...` |
| **X-Requested-With** | 表示请求是由 AJAX 方式发起的。                               | `XMLHttpRequest`                            |


---

#### **1.4 请求体 (Payload)**

POST 请求中提交的具体数据：

```json
{
  "username": "2213741",
  "password": "********",
  "verify": FOXX
}
```
- userid: `2213741`

  这是用户的唯一标识符或用户名，通常用于登录系统时验证用户身份。

- password: `1111111`

  这是用户输入的密码。密码通常通过 POST 请求提交到服务器进行验证。

- verify: `FOXX`

  这是用户输入的验证码，用于防止自动化脚本登录，确保是人为操作。

#### **1.5 响应头部 **

响应头部 提供了服务器对客户端的响应配置，包括缓存控制、编码方式、时间等安全选项。

| 字段                     | 说明                                                             | 示例值                                |
|--------------------------|------------------------------------------------------------------|---------------------------------------|
| **Cache-Control**        | 控制缓存行为，`no-store` 禁止缓存，`no-cache` 每次请求都验证。    | `no-store, no-cache, must-revalidate` |
| **Connection**           | 服务器端的连接管理，`keep-alive` 表示保持连接。                   | `keep-alive`                          |
| **Content-Encoding**     | 表明响应体的压缩方式，例如 `gzip` 提高传输效率。                 | `gzip`                                |
| **Content-Type**         | 响应内容的数据类型，例如 `application/json`。                    | `application/json`                    |
| **Date**                 | 服务器生成响应的时间。                                           | `Mon, 16 Dec 2024 03:17:21 GMT`       |
| **Expires**              | 响应的过期时间，用于缓存控制。                                   | `Thu, 19 Nov 1981 08:52:00 GMT`       |
| **Pragma**               | HTTP/1.0 兼容缓存控制指令，`no-cache` 表示不使用缓存。            | `no-cache`                            |
| **Transfer-Encoding**    | 数据传输编码方式，`chunked` 表示分块传输。                       | `chunked`                             |
| **X-Content-Type-Options** | 防止浏览器嗅探文件类型，`nosniff` 表示只按 Content-Type 解析。   | `nosniff`                             |
| **X-Frame-Options**      | 控制页面是否可以被嵌入到其他网页中，`sameorigin` 限制为同源页面。 | `sameorigin`                          |
| **X-Protected-By**       | 服务器安全保护机制的标识。                                       | `NKSOC`                               |
| **X-Xss-Protection**     | 浏览器的跨站脚本 (XSS) 保护机制。                                | `1; mode=block`                       |


### 3.GET请求
通过筛选，我们发现其通过GET方法获取验证码图片，具体截图如下：

我们观察出GET与POST的区别：

#### 1.1 请求目的与作用 

GET	请求获取资源，不会修改数据。	用于获取验证码图片、静态资源等。
POST	提交数据到服务器，修改状态。	用于登录、注册，提交表单信息等。

在请求头部中：
   | 字段                 | GET 请求中的值                          | POST 请求中的值                          |
|----------------------|----------------------------------------|-----------------------------------------|
| **Request Method**   | `GET`                                 | `POST`                                  |
| **Content-Type**     | **无**（GET 请求不携带主体数据）。       | `application/x-www-form-urlencoded`     |
| **Accept**           | 支持图片格式，如 `image/*`。            | `*/*` 表示接受任意类型。                 |
| **Sec-Fetch-Dest**   | `image`（表明请求的资源是图片）。        | `empty`（通常无具体资源类型）。           |
| **Content-Length**   | **无**（GET 请求不发送数据）。          | 有具体值，如 `43` 表示发送数据大小。      |

#### 1.2 请求目的与作用 

GET	无请求体，数据附加在 URL 中（这里还表现在会有`time=1734320815000`字样出现在url末）。	返回验证码图片数据 (image/png 格式)。
POST	请求体中包含用户名、密码等数据。	返回 JSON 数据或登录状态信息。

在响应头部中：
| 字段                     | GET 响应中的值                       | POST 响应中的值                      |
|--------------------------|--------------------------------------|--------------------------------------|
| **Content-Type**         | `image/png`（返回验证码图片）。       | `application/json`（返回 JSON 数据）。 |
| **Cache-Control**        | `private, no-store, max-age=0`   确保实时更新，防止缓存。    | `no-store, no-cache, must-revalidate` |


--- 

---

## 任务 2：使用 jQuery 触发事件

### 1.要求

针对任意网页，使用 jQuery 能够出发某一事件，并写出至少三条语句，同时截图响应前后的不同状态。

### 2.刷新验证码图片

在jQuery 的 .attr() 方法中：`$(selector).attr(attributeName, value)`用于设置或修改 HTML 元素的属性。

我们首先找到改图片所对应的id值，通过在页面中检查元素的方法：

可以知道该图片的id为`#verifyImg`。
我们再通过语句

```html
$('#verifyImg').attr('src', '/oauth/sso/verify');
```
用来刷新网页中验证码资源显示，刷新前后效果如图：

---

---

### 

## 任务 3：创建一个 Chrome 插件

### 要求

完成一个 Chrome 浏览器插件，功能不限，并在文档中写明功能及代码。

### 插件功能

- 插件的弹出页面（popup）会在用户点击 Chrome 浏览器工具栏中的插件图标时打开；
- 页面上方显示用户的基本信息，包括：专业、学号、姓名；
- 页面设计中包含一个用于展示个人 LOGO 的图片区域。LOGO 以图片形式展示，通过 `<img>` 标签加载；
- 页面提供一个音频控件，用于播放自我介绍音频文件。音频文件路径为 `audio/myself.mp3`，在 `popup.html` 中通过 `<audio>` 标签引用。
- 页面底部有一个带有 `id="myButton"` 的按钮，称为“魔法链接按钮”，用于引导用户访问特定页面（GitHub 主页）。

### 实现步骤

1. **创建项目文件夹**，在本项目中我设置为 `chrome_extension`。

2. **创建 `manifest.json`**，配置插件基本信息：
   
   ```json
   {
       "manifest_version": 3,
       "name": "mu_mian's Chrome Extension",
       "version": "1.0",
       "description": "Haloooooo!.",
       "author": "2220634014@qq.com",
       "permissions": ["scripting",
             "activeTab",
             "tabs",
             "notifications",
             "storage"],
       "background": {
         "service_worker": "background.js"
       },
       "action": {
         "default_popup": "popup.html",
         "default_icon": {
           "16": "imgs/icon16.png",
           "32": "imgs/icon32.png",
           "48": "imgs/icon48.png",
           "64": "imgs/icon64.png",
           "128": "imgs/icon128.png",
           "256": "imgs/icon256.png"
         }
       }
     }
   ```

3. **background.js**：实现插件安装时候，**检测当前页面**，向控制台打印`Extension installed`。
   
   ```js
   chrome.runtime.onInstalled.addListener(() => {
       console.log('Extension installed');
     });
   ```

4. **创建 `popup.html` 和 `popup.css` 文件**，设计插件的界面。从页面设计的角度来看，`popup.html` 和 `popup.css` 文件构成了此 Chrome 扩展的用户界面部分。以下是它们的设计细节和功能说明。
- **创建项目文件夹**，在本项目中我设置为 `chrome_extension`。

- **创建 `manifest.json`**，配置插件基本信息：
  
  ```json
  {
      "manifest_version": 3,
      "name": "mu_mian's Chrome Extension",
      "version": "1.0",
      "description": "Haloooooo!.",
      "author": "2220634014@qq.com",
      "permissions": ["scripting",
            "activeTab",
            "tabs",
            "notifications",
            "storage"],
      "background": {
        "service_worker": "background.js"
      },
      "action": {
        "default_popup": "popup.html",
        "default_icon": {
          "16": "imgs/icon16.png",
          "32": "imgs/icon32.png",
          "48": "imgs/icon48.png",
          "64": "imgs/icon64.png",
          "128": "imgs/icon128.png",
          "256": "imgs/icon256.png"
        }
      }
    }
  ```

- **background.js**：实现插件安装时候，**检测当前页面**，向控制台打印`Extension installed`。
  
  ```js
  chrome.runtime.onInstalled.addListener(() => {
      console.log('Extension installed');
    });
  ```

- **创建 `popup.html` 和 `popup.css` 文件**，设计插件的界面。从页面设计的角度来看，`popup.html` 和 `popup.css` 文件构成了此 Chrome 扩展的用户界面部分。以下是它们的设计细节和功能说明。

```html
<!-- popup.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>个人主页</title>
    <!-- 引入外部CSS文件 -->
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="info-box">
        <p>-------------------------------------------------------</p>
        <h1>个人主页</h1>
        <p>专业：密码科学与技术</p>
        <p>学号：2213912</p>
        <p>姓名：罗劲</p>
        <p>-------------------------------------------------------</p>
        <h2>LOGO</h2>
        <img src="./imgs/logo.png" alt="个人LOGO">
        <p>-------------------------------------------------------</p>
        <h2>自我介绍</h2>
        <audio controls>
            <source src="audio/myself.mp3" type="audio/mpeg">
            您的浏览器不支持音频播放。
        </audio>
        <p>-------------------------------------------------------</p>
        <h2>魔法链接按钮</h2>
        <button id="myButton">Click me</button>
        <script src="popup.js"></script>
        <p>-------------------------------------------------------</p>
    </div>
</body>
</html>
```

```css
/* popup.css */
/* 设置页面背景 */
body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    background-image: url('imgs/background.png');
    background-size: cover;
    background-position: center;
    font-family: Arial, sans-serif;
}

/* 方框样式 */
.info-box {
    padding: 70px;
    width: 700px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    text-align: center;
    color: #333;
    background-color: rgba(255, 255, 255, 0.5); /* 添加半透明背景颜色提高可读性 */
}

/* 标题和文本样式 */
h1 {
    font-size: 24px;
    margin: 10px 0;
}

p {
    margin: 5px 0;
    font-size: 16px;
}

/* 音频控制样式 */
audio {
    margin-top: 12px;
    width: 80%;
}

/* LOGO图片样式（减小大小） */
.info-box img {
    margin-top: 5px;
    width: 20%; 
    height: auto;
}
```

```js
#popup.js
document.getElementById('myButton').addEventListener('click', () => {
    alert('欢迎来到我的github!');
    chrome.tabs.create({ url: 'https://github.com/wallgreataa' });
  });
```

- `popup.html` 定义了页面结构，展示个人信息、LOGO、音频文件和导航按钮。
- `popup.css` 提供了弹出页面的样式，使页面内容居中，并使用半透明背景和阴影效果提升用户体验。
- 页面通过 `popup.js` 实现了按钮点击后的导航功能，完成了 Chrome 扩展的基本交互功能。

这个设计通过 HTML、CSS 和 JavaScript 的结合，实现了简洁、功能明确的 Chrome 扩展弹出页面。

### 插件展示

该插件在浏览器工具栏上显示一个按钮，点击后弹出页面，提供跳转到指定网站的功能。

<img title="" src="file:///C:/Users/lj159/AppData/Roaming/marktext/images/2024-11-02-18-48-53-image.png" alt="" width="496"><img title="" src="file:///C:/Users/lj159/AppData/Roaming/marktext/images/2024-11-02-18-48-33-image.png" alt="" width="525">

* 个人信息展示：包括专业、学号、姓名

* 个人LOGO展示；

* 个人的一段语音自我介绍

* 一个点击按钮即可抵达我的github主页的按钮，如下图所示，当点击**魔法按钮**：`Click me`时，就会跳转到我的github主页！
  
  <img title="" src="file:///C:/Users/lj159/AppData/Roaming/marktext/images/2024-11-02-18-52-29-image.png" alt="" data-align="left" width="557">
  
  跳转到我自己的github页面！
  
  <img src="file:///C:/Users/lj159/AppData/Roaming/marktext/images/2024-11-02-18-53-37-image.png" title="" alt="" width="1132">



以上是项目的详细说明和代码示例。根据这些内容可以进一步调整和扩展插件的功能。
